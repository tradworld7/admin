<!-- Same HTML/CSS as signup.html, just change the form and script -->

<div class="auth-container">
    <div class="auth-card">
        <h2 class="auth-title">Admin Login</h2>
        <form id="loginForm">
            <div class="form-group">
                <label for="loginEmail">Email</label>
                <input type="email" id="loginEmail" class="form-control" placeholder="rkv858810@gmail.com" required>
            </div>
            <div class="form-group">
                <label for="loginPassword">Password</label>
                <input type="password" id="loginPassword" class="form-control" placeholder="123@rkve858810" required>
            </div>
            <button type="submit" class="btn btn-primary btn-block" id="loginBtn">
                <span id="loginBtnText">Login</span>
                <span id="loginSpinner" class="spinner" style="display: none;"></span>
            </button>
        </form>
        <div class="auth-footer">
            Don't have an account? <a href="signup.html">Sign Up</a>
        </div>
    </div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.0/firebase-app.js";
    import { 
        getAuth, 
        signInWithEmailAndPassword,
        signOut
    } from "https://www.gstatic.com/firebasejs/9.6.0/firebase-auth.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBshAGZScyo7PJegLHMzORbkkrCLGD6U5s",
        authDomain: "mywebsite-600d3.firebaseapp.com",
        databaseURL: "https://mywebsite-600d3-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "mywebsite-600d3",
        storageBucket: "mywebsite-600d3.appspot.com",
        messagingSenderId: "584485288598",
        appId: "1:584485288598:web:01856eaa18ba5ada49e0b7",
        measurementId: "G-GQ9J9QH42J"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            const loginBtn = document.getElementById('loginBtn');
            const loginBtnText = document.getElementById('loginBtnText');
            const loginSpinner = document.getElementById('loginSpinner');
            
            loginBtn.disabled = true;
            loginBtnText.textContent = 'Logging in...';
            loginSpinner.style.display = 'inline-block';
            
            try {
                await signInWithEmailAndPassword(auth, email, password);
                showToast('Login successful! Redirecting...', 'success');
                window.location.href = 'index.html';
            } catch (error) {
                let errorMessage = 'Login failed';
                if (error.code === 'auth/invalid-login-credentials') {
                    errorMessage = 'Invalid email or password';
                } else if (error.code === 'auth/too-many-requests') {
                    errorMessage = 'Account temporarily disabled due to many failed attempts';
                } else if (error.code === 'auth/user-not-found') {
                    errorMessage = 'Account not found. Please sign up first.';
                }
                showToast(errorMessage, 'error');
            }
            
            loginBtn.disabled = false;
            loginBtnText.textContent = 'Login';
            loginSpinner.style.display = 'none';
        });
    });

    function showToast(message, type) {
        const toastContainer = document.getElementById('toastContainer');
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        toast.innerHTML = `
            <span>${message}</span>
            <button class="toast-close">&times;</button>
        `;
        
        toastContainer.appendChild(toast);
        
        setTimeout(() => {
            toast.remove();
        }, 5000);
        
        toast.querySelector('.toast-close').addEventListener('click', () => {
            toast.remove();
        });
    }
</script>
